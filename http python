#!/usr/bin/python
a=dict()
client=dict()

with open("/home/avanti/l3/weblog.txt","r") as f:
    for line in f:
        str=line

        temp=str.split( "\"");
        str1=temp[0]
        str2=temp[1]
        str3=temp[2]
        user_agent=temp[5]

        temp1=str1.split()
        client_ip= temp1[0]
        RFC_identity=temp1[1]
        user_id=temp1[2]
        date=temp1[3]

        temp2=str2.split()
        method=temp2[0]
        url=temp2[1]
        f_url=url.split('/',1)
        uurl=f_url[0]
        version=temp2[2]


        temp3=str3.split()
        error_code=temp3[0]
        obj_size=temp3[1]
        
        #for item in a:
        if uurl in a:
            a[uurl]+=1
        else:
            a[uurl]=1
        
        if client_ip in client:
            client[client_ip]+=1
        else:
            client[client_ip]=1
                
        print "client ip: "+client_ip
        print "RFC identity: "+RFC_identity
        print "user id: "+ user_id
        print "Date: "+ date
        print "Method: "+ method
        print "URL: "+ url
        print "Version : "+ version
        print "Error Code : "+ error_code
        print "Size of returned object: "+ obj_size
        print "User Agent : "+ user_agent
        print "\n"
  
print "Number of hits for every website"     
for key,val in a.items():
    print key, "=>", val
print "\n"
print "Number of times a particular client sent requests"
for key,val in client.items():
    print key,"=>", val
    
 #----------------------------------------------------------------------------------------   

# output snippet

client ip: 194.8.75.149
RFC identity: -
user id: -
Date: [19/May/2009:23:39:20
Method: POST
URL: www.kinneryandrajan.com/wp-comments-post.php
Version : HTTP/1.0
Error Code : 302
Size of returned object: 0
User Agent : Mozilla/4.79 [en] (Windows NT 5.0; U)
  ANALYSIS using dictionary data structure
  
Number of hits for every website
www.twibuzz.com => 1779
www.kinneryandrajan.com => 843
kinneryandrajan.com => 6
recipewithme.com => 1
twibuzz.com => 133
www.recipewithme.com => 16


Number of times a particular client sent requests
72.30.81.157 => 4
74.6.18.216 => 4
194.8.75.149 => 78
69.58.178.29 => 10
74.86.223.42 => 1
69.58.178.26 => 2
81.203.21.220 => 5
66.229.158.224 => 1
204.191.213.222 => 19
83.35.95.61 => 5
193.47.80.37 => 2
80.175.181.237 => 5
201.21.100.64 => 23
65.55.211.60 => 2
70.72.206.46 => 21
99.188.162.75 => 8
67.202.41.3 => 37
86.14.17.39 => 1
76.89.159.20 => 68
190.189.123.85 => 5
83.41.220.74 => 6
187.3.48.108 => 8
201.34.252.250 => 6
189.115.2.249 => 6
200.142.58.18 => 6
189.157.130.85 => 4
124.43.41.194 => 4
58.35.169.20 => 12
209.85.238.23 => 1
200.121.223.129 => 4
131.193.141.235 => 5
207.248.55.182 => 4
72.14.229.81 => 13
74.125.16.66 => 1
200.155.126.66 => 1
71.183.240.247 => 5
158.111.5.34 => 19
84.63.128.11 => 1
200.72.149.230 => 1
124.43.51.230 => 9
201.246.107.133 => 4
200.31.118.148 => 5
174.145.199.206 => 1
192.150.10.200 => 7
189.63.163.151 => 5
206.132.195.35 => 4
91.107.52.123 => 1
67.137.27.170 => 7
193.146.44.146 => 5
85.127.250.64 => 13
66.235.124.21 => 5
91.205.124.6 => 4
80.31.102.120 => 4
195.189.142.53 => 4
201.211.193.94 => 11
201.50.27.92 => 1
158.96.4.1 => 2
98.151.136.229 => 4
12.47.101.11 => 10
58.246.4.62 => 4
213.97.72.23 => 5
87.217.61.132 => 11
24.251.172.199 => 6
76.98.127.100 => 19
189.58.200.215 => 15
66.45.128.8 => 15
82.95.120.160 => 4
209.17.171.58 => 4
173.115.29.176 => 1
71.146.152.249 => 10
159.28.160.100 => 3
122.106.118.192 => 4
95.134.34.215 => 1
192.54.144.229 => 33
150.108.97.38 => 5
190.82.201.3 => 3
198.152.240.62 => 5
68.120.225.239 => 5
88.9.240.93 => 14
216.129.119.12 => 3
208.80.195.51 => 1
201.6.229.96 => 58
94.180.192.125 => 2
201.239.160.238 => 5
198.175.175.111 => 19
68.51.189.75 => 5
69.64.69.150 => 10
82.68.19.94 => 6
192.85.47.1 => 3
192.85.47.2 => 9
67.195.112.114 => 3
216.165.126.102 => 14
201.209.182.45 => 3
189.169.39.160 => 4
82.80.128.42 => 5
66.249.67.84 => 14
83.40.68.62 => 6
216.239.45.4 => 105
96.11.66.149 => 4
24.6.98.146 => 67
208.80.195.42 => 1
208.80.195.45 => 1
190.12.99.34 => 5
194.8.74.220 => 106
74.6.22.103 => 329
85.49.181.57 => 5
67.202.55.193 => 2
91.124.57.25 => 1
66.249.66.165 => 1
200.142.58.19 => 2
72.167.232.193 => 12
66.249.70.102 => 701
193.47.80.43 => 6
68.42.59.164 => 10
63.241.98.52 => 1
201.75.106.112 => 2
201.231.59.7 => 4
190.131.10.22 => 4
72.167.92.197 => 3
190.48.125.166 => 4
208.80.195.38 => 1
71.41.201.38 => 2
76.169.26.59 => 5
212.95.58.209 => 4
76.190.134.254 => 21
72.14.195.223 => 19
208.80.195.36 => 1
208.80.195.31 => 1
208.80.195.30 => 1
208.80.195.33 => 2
194.8.75.163 => 92
24.126.239.20 => 1
80.79.82.6 => 11
74.6.22.156 => 4
67.218.105.253 => 6
200.137.195.77 => 7
76.245.47.145 => 2
209.131.41.48 => 11
209.131.41.49 => 15
72.196.205.225 => 5
85.223.207.141 => 29
114.150.124.108 => 15
213.196.65.211 => 2
143.54.43.166 => 9
70.231.229.80 => 80
216.129.119.44 => 25
216.129.119.45 => 4
208.80.195.28 => 1
190.212.19.138 => 1
208.69.177.117 => 1
77.179.195.218 => 1
131.107.0.86 => 11
131.107.0.85 => 8
190.42.194.138 => 21
90.187.41.217 => 5
210.128.186.2 => 4
208.115.138.254 => 2
71.206.217.20 => 6
208.109.163.135 => 3
217.76.102.2 => 13
81.210.207.215 => 9
66.249.85.134 => 8
72.30.142.90 => 72
190.50.35.51 => 5
98.229.117.112 => 4
202.12.97.114 => 1
